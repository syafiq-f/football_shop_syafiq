{% extends 'base.html' %}
{% load static %}

{% block content %}
    <h1>{{ app_name }}</h1>

    <h4>Name:</h4>
    <p>{{ name }}</p>

    <h4>Class:</h4>
    <p>{{ class }}</p>

    <a href="{% url 'main:create_product' %}">
        <button>+ Add Product</button>
    </a>

    <a href="{% url 'main:logout' %}">
        <button>Logout</button>
    </a>
    <h5>Sesi terakhir login: {{ last_login }}</h5>
    <hr>

    <a href="?filter=all">
    <button type="button">All Product</button>
    </a>

    <a href="?filter=my">
        <button type="button">My Product</button>
    </a> 


    <hr>

    <!-- REFERENCE FOR IF ELSE : https://www.w3schools.com/django/django_tags_if.php -->
     <!-- REFERENCE FOR LOOPING : https://www.w3schools.com/django/django_tags_for.php -->
    {% if not products %}
        <p>Belum ada produk.</p>
    {% else %}
        {% for product in products %}
        <div>
            <h2><a href="{% url 'main:show_products' product.id %}">{{ product.name }}</a></h2>
            
            <p><b>{{ product.get_category_display }}</b>
            {% if product.is_featured %} | <b>Featured</b>{% endif %} 
            | <i>{{ product.created_at|date:"d M Y H:i" }}</i></p>

            {% if product.thumbnail %}
            <img src="{{ product.thumbnail }}" alt="{{ product.name }}" width="150" height="100">
            <br />
            {% endif %}

            <p>{{ product.description|truncatewords:25 }}...</p>

            <p>Harga: Rp{{ product.price }}</p>

            <p><a href="{% url 'main:show_products' product.id %}"><button>View Details</button></a></p>
        </div>
        <hr>
        {% endfor %}
    {% endif %}
{% endblock content %}